import{r,j as e}from"./index-BTLMSJlm.js";import{e as b,f as m,g as N}from"./index-CyG_8B67.js";import"./iconBase-DQDILiGN.js";const w=()=>{const[t,h]=r.useState([]),[a,l]=r.useState(!0),[d,p]=r.useState(null),[i,g]=r.useState(null);r.useEffect(()=>{(async()=>{l(!0);try{await new Promise(j=>setTimeout(j,1e3)),h([]),g(new Date);const n=new Date;n.setHours(n.getHours()+2),p(n)}catch(x){console.error("Error fetching pending leaves:",x)}finally{l(!1)}})()},[]);const c=()=>{window.location.reload()},o=s=>s?s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",u=s=>s?s.toLocaleDateString():"N/A";return e.jsxs("div",{className:"p-6 min-h-screen bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-semibold text-gray-800",children:"Pending Leave Applications"}),e.jsx("p",{className:"text-gray-500 text-sm",children:a?"Checking for pending leaves...":t.length>0?"Review and approve/reject leave requests":"No pending leave applications currently"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[e.jsx(b,{className:"mr-2"}),e.jsxs("span",{children:["Last checked: ",o(i)," on"," ",u(i)]})]}),e.jsxs("button",{onClick:c,disabled:a,className:`flex items-center px-4 py-2 rounded-md border ${a?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white hover:bg-blue-50 text-blue-600 border-blue-500"} transition`,children:[e.jsx(m,{className:`mr-2 ${a?"animate-spin text-gray-400":""}`}),"Refresh"]})]})]}),a?e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-3 text-gray-600",children:"Checking for pending leaves..."})]}):t.length>0?e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Employee"}),e.jsx("th",{className:"p-3",children:"Leave Type"}),e.jsx("th",{className:"p-3",children:"From"}),e.jsx("th",{className:"p-3",children:"To"}),e.jsx("th",{className:"p-3",children:"Days"}),e.jsx("th",{className:"p-3",children:"Applied On"}),e.jsx("th",{className:"p-3",children:"Reason"}),e.jsx("th",{className:"p-3",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[e.jsx("td",{className:"p-3",children:s.employee}),e.jsx("td",{className:"p-3",children:s.leaveType}),e.jsx("td",{className:"p-3",children:s.from}),e.jsx("td",{className:"p-3",children:s.to}),e.jsx("td",{className:"p-3",children:s.days}),e.jsx("td",{className:"p-3",children:s.appliedOn}),e.jsx("td",{className:"p-3 max-w-xs truncate",children:s.reason}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-green-500 text-white rounded-md hover:bg-green-600",children:"Approve"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:"Reject"}),e.jsx("button",{className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-100",children:"View"})]})]},s.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center px-4 py-3 text-sm text-gray-500 border-t",children:[e.jsxs("span",{children:["Showing 1 to ",t.length," of ",t.length," ","entries"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"px-3 py-1 rounded-md border bg-gray-100 cursor-not-allowed",children:"Previous"}),e.jsx("button",{className:"px-3 py-1 rounded-md bg-blue-600 text-white",children:"1"}),e.jsx("button",{className:"px-3 py-1 rounded-md border bg-gray-100 cursor-not-allowed",children:"Next"})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-10 text-center",children:[e.jsx(N,{className:"mx-auto text-gray-400 mb-3",size:48}),e.jsx("h5",{className:"text-lg text-gray-500 mb-2",children:"No Pending Leaves Currently"}),d&&e.jsxs("div",{className:"bg-blue-50 text-blue-700 px-4 py-2 rounded-md inline-block mt-3",children:["Next expected pending leaves around ",o(d)]}),e.jsxs("div",{className:"mt-6 text-gray-600",children:[e.jsx("p",{className:"mb-2",children:"New leave applications may appear when:"}),e.jsxs("ul",{className:"text-left mx-auto max-w-sm list-disc list-inside",children:[e.jsx("li",{children:"Employees submit new leave requests"}),e.jsx("li",{children:"System processes batch submissions"}),e.jsx("li",{children:"Managers delegate approvals to you"}),e.jsx("li",{children:"Scheduled leave periods begin"})]})]}),e.jsxs("button",{onClick:c,className:"mt-6 flex items-center mx-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(m,{className:"mr-2"})," Check Again Now"]})]})]})};export{w as default};
